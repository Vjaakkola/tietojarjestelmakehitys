<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Valiokunnat</title>

  <link rel="stylesheet" href="edtyyli.css" />
</head>

<body>

  <div id="ylaosa">
    <h1>VALIOKUNNAT</h1>
    <nav class="navi">
      <a href="ed.html" title="Takaisin etusivulle">Etusivu</a>
      <a href="vaalipiirit.html" title="Kartta vaalipiireistä">Vaalipiirit</a>
      <a href="hallitus.html" title="Tietoa hallituksesta">Hallitus</a>
      <a href="valiokunta.html" aria-current="page" title="Valiokunnat">Valiokunnat</a>
    </nav>
  </div>

  <div id="dataosa">
    <h2>Mitä valiokunnat ovat?</h2>
    <p>
      Valiokunnat valmistelevat eduskunnan päätöksentekoa: ne käsittelevät lakiesityksiä,
      kuulevat asiantuntijoita ja tekevät mietintöjä täysistuntoa varten.
    </p>

    <div class="haku-blokki">
  <label class="label" for="valiokuntaSelect">Valitse valiokunta</label>
  <select id="valiokuntaSelect">
    <option value="">— Valitse —</option>
  </select>
  <button id="avaaValiokunta" disabled>Avaa</button>
</div>

<script src="valiokunnat.js"></script>
<script>
  const select = document.getElementById("valiokuntaSelect");
  const btn = document.getElementById("avaaValiokunta");

  if (typeof valiokunnat === "undefined" || !Array.isArray(valiokunnat)) {
    console.error("valiokunnat-dataa ei löytynyt. Tarkista valiokunnat.js");
  } else {
    valiokunnat
      .slice()
      .sort((a, b) => a.name.localeCompare(b.name, "fi"))
      .forEach(v => {
        const opt = document.createElement("option");
        opt.value = v.url;
        opt.textContent = v.name;
        select.appendChild(opt);
      });
  }

  select.addEventListener("change", () => {
    btn.disabled = !select.value;
  });

  btn.addEventListener("click", () => {
    if (select.value) window.open(select.value, "_blank", "noopener");
  });
</script>

</body>
</html>
